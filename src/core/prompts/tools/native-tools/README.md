# Native Tools

Набор встроенных инструментов (tools) для LLM, обеспечивающих взаимодействие с файловой системой, выполнение команд, поиск по коду и другие системные действия.

## Обзор

Эти инструменты предоставляют модели возможности:
- Читать, создавать, удалять и редактировать файлы.
- Выполнять поиск по кодовой базе (семантический и текстовый).
- Исполнять CLI-команды.
- Взаимодействовать с браузером.
- Управлять состоянием диалога и переключать режимы.

## Подключение

Все инструменты экспортируются через функцию `getNativeTools` в `index.ts`.

```typescript
import { getNativeTools } from './src/core/prompts/tools/native-tools';

const tools = getNativeTools({
    partialReadsEnabled: true, // Включить чтение диапазонов строк
    maxConcurrentFileReads: 5   // Максимум файлов за один запрос
});
```

## Список инструментов

### Работа с файлами

- **`read_file`**: Чтение содержимого одного или нескольких файлов. Поддерживает `line_ranges` для эффективного чтения больших файлов.
- **`write_to_file`**: Создание нового файла или полная перезапись существующего.
- **`edit_file`**: Редактирование файла через поиск и замену подстроки. Требует точного совпадения `old_string`. Также может использоваться для создания файлов.
- **`apply_diff`**: Применение точечных изменений к файлу с использованием блоков SEARCH/REPLACE (аналог diff-патчей).
- **`delete_file`**: Удаление файла (находится в подпапке `kilocode`).
- **`list_files`**: Список файлов и директорий в указанном пути (опционально рекурсивно).

### Поиск и анализ

- **`codebase_search`**: Семантический поиск по всей кодовой базе. Рекомендуется использовать первым делом при исследовании незнакомого кода.
- **`search_files`**: Поиск по файлам с использованием регулярных выражений (Rust regex syntax).
- **`search_replace`**: Поиск и замена текста по паттерну.

### Выполнение команд и системные действия

- **`execute_command`**: Выполнение произвольных CLI-команд в системе.
- **`browser_action`**: Выполнение действий в браузере (навигация, клики, скриншоты и т.д.).
- **`run_slash_command`**: Выполнение специальных слеш-команд (например, `/help`, `/clear`).

### Управление процессом

- **`ask_followup_question`**: Задать уточняющий вопрос пользователю.
- **`attempt_completion`**: Сигнализировать о завершении задачи с предоставлением результата.
- **`switch_mode`**: Переключение между режимами работы (например, из исследовательского в режим написания кода).
- **`new_task`**: Инициализация новой задачи.

### Прочее

- **`access_mcp_resource`**: Доступ к ресурсам через протокол MCP (Model Context Protocol).
- **`mcp_server`**: Управление инструментами внешних MCP-серверов.
- **`generate_image`**: Генерация изображений (если поддерживается провайдером).
- **`update_todo_list`**: Работа со списком задач в рамках текущего контекста.

## Структура директории

- `kilocode/` — специализированные инструменты (например, `fast_edit_file`, `delete_file`).
- `converters.ts` — утилиты для преобразования форматов инструментов (например, из OpenAI в Anthropic).
- `mcp_server.ts` — логика работы с внешними MCP серверами.
- `__tests__/` — модульные тесты для проверки логики инструментов и конвертеров.

## Особенности использования

- **Strict Mode**: Многие инструменты используют `strict: true` в определении параметров для обеспечения точного следования схеме JSON.
- **Безопасность**: Инструменты `execute_command` и файловые операции требуют осторожности при выполнении в недоверенных средах.
